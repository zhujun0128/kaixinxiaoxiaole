window.__require=function t(e,i,s){function l(o,c){if(!i[o]){if(!e[o]){var a=o.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!c&&u)return u(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+o+"'")}o=a}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){return l(e[o][1][t]||t)},h,h.exports,t,e,i,s)}return i[o].exports}for(var n="function"==typeof __require&&__require,o=0;o<s.length;o++)l(s[o]);return l}({AudioUtils:[function(t,e,i){"use strict";cc._RF.push(e,"6335fpwNR5EH6gYedPULMe+","AudioUtils"),cc.Class({extends:cc.Component,properties:{swap:{type:cc.AudioClip,default:null},click:{type:cc.AudioClip,default:null},eliminate:{type:[cc.AudioClip],default:[]},continuousMatch:{type:[cc.AudioClip],default:[]}},playSwap:function(){cc.audioEngine.play(this.swap,!1,1)},playClick:function(){cc.audioEngine.play(this.click,!1,1)},playEliminate:function(t){t=Math.min(this.eliminate.length-1,t),cc.audioEngine.play(this.eliminate[t],!1,1)},playContinuousMatch:function(t){(t=Math.min(t,11))<2||cc.audioEngine.play(this.continuousMatch[Math.floor(t/2)-1],!1,1)},start:function(){}}),cc._RF.pop()},{}],CellModel:[function(t,e,i){"use strict";cc._RF.push(e,"f7173eVA2xMkKVk82uzBj3M","CellModel"),i.__esModule=!0,i.default=void 0;var s=t("./ConstValue"),l=function(){function t(){this.type=null,this.status=s.CELL_STATUS.COMMON,this.x=1,this.y=1,this.startX=1,this.startY=1,this.cmd=[],this.isDeath=!1,this.objecCount=Math.floor(1e3*Math.random())}var e=t.prototype;return e.init=function(t){this.type=t},e.isEmpty=function(){return this.type==s.CELL_TYPE.EMPTY},e.setEmpty=function(){this.type=s.CELL_TYPE.EMPTY},e.setXY=function(t,e){this.x=t,this.y=e},e.setStartXY=function(t,e){this.startX=t,this.startY=e},e.setStatus=function(t){this.status=t},e.moveToAndBack=function(t){var e=cc.v2(this.x,this.y);this.cmd.push({action:"moveTo",keepTime:s.ANITIME.TOUCH_MOVE,playTime:0,pos:t}),this.cmd.push({action:"moveTo",keepTime:s.ANITIME.TOUCH_MOVE,playTime:s.ANITIME.TOUCH_MOVE,pos:e})},e.moveTo=function(t,e){this.cmd.push({action:"moveTo",keepTime:s.ANITIME.TOUCH_MOVE,playTime:e,pos:t}),this.x=t.x,this.y=t.y},e.toDie=function(t){this.cmd.push({action:"toDie",playTime:t,keepTime:s.ANITIME.DIE}),this.isDeath=!0},e.toShake=function(t){this.cmd.push({action:"toShake",playTime:t,keepTime:s.ANITIME.DIE_SHAKE})},e.setVisible=function(t,e){this.cmd.push({action:"setVisible",playTime:t,keepTime:0,isVisible:e})},e.moveToAndDie=function(t){},e.isBird=function(){return this.type==s.CELL_TYPE.BIRD},t}();i.default=l,e.exports=i.default,cc._RF.pop()},{"./ConstValue":"ConstValue"}],CellView:[function(t,e,i){"use strict";cc._RF.push(e,"e87a8t45zhJ8rcgjmwFxo69","CellView");var s=t("../Model/ConstValue");cc.Class({extends:cc.Component,properties:{defaultFrame:{type:cc.SpriteFrame,default:null}},onLoad:function(){this.isSelect=!1,this.node.getChildByName("select").active=!1},initWithModel:function(t){this.model=t;var e=t.startX,i=t.startY;this.node.x=s.CELL_WIDTH*(e-.5),this.node.y=s.CELL_HEIGHT*(i-.5);var l=this.node.getComponent(cc.Animation);t.status==s.CELL_STATUS.COMMON?l.stop():l.play(t.status)},updateView:function(){var t=this,e=this.model.cmd;if(!(e.length<=0)){var i,l=[],n=0;for(var o in e){if(e[o].playTime>n&&l.push(cc.delayTime(e[o].playTime-n)),"moveTo"==e[o].action){var c=(e[o].pos.x-.5)*s.CELL_WIDTH,a=(e[o].pos.y-.5)*s.CELL_HEIGHT;l.push(cc.moveTo(s.ANITIME.TOUCH_MOVE,cc.v2(c,a)))}else if("toDie"==e[o].action){if(this.status==s.CELL_STATUS.BIRD)this.node.getComponent(cc.Animation).play("effect"),l.push(cc.delayTime(s.ANITIME.BOMB_BIRD_DELAY));l.push(cc.callFunc(function(){this.node.destroy()},this))}else if("setVisible"==e[o].action)(function(){var i=e[o].isVisible;l.push(cc.callFunc(function(){this.node.opacity=i?255:0},t))})();else if("toShake"==e[o].action){var u=cc.rotateBy(.06,30),h=cc.rotateBy(.12,-60);l.push(cc.repeat(cc.sequence(u,h,u),2))}n=e[o].playTime+e[o].keepTime}if(1==l.length)this.node.runAction(l[0]);else this.node.runAction((i=cc).sequence.apply(i,l))}},setSelect:function(t){var e=this.node.getComponent(cc.Animation),i=this.node.getChildByName("select");0==t&&this.isSelect&&this.model.status==s.CELL_STATUS.COMMON?(e.stop(),this.node.getComponent(cc.Sprite).spriteFrame=this.defaultFrame):t&&this.model.status==s.CELL_STATUS.COMMON?e.play(s.CELL_STATUS.CLICK):t&&this.model.status==s.CELL_STATUS.BIRD&&e.play(s.CELL_STATUS.CLICK),i.active=t,this.isSelect=t},start:function(){}}),cc._RF.pop()},{"../Model/ConstValue":"ConstValue"}],ConstValue:[function(t,e,i){"use strict";cc._RF.push(e,"fe4323e0GJHyIz2UJcLHyYc","ConstValue"),i.__esModule=!0,i.ANITIME=i.GRID_PIXEL_HEIGHT=i.GRID_PIXEL_WIDTH=i.CELL_HEIGHT=i.CELL_WIDTH=i.GRID_HEIGHT=i.GRID_WIDTH=i.CELL_STATUS=i.CELL_BASENUM=i.CELL_TYPE=void 0;i.CELL_TYPE={EMPTY:0,A:1,B:2,C:3,D:4,E:5,F:6,BIRD:7};i.CELL_BASENUM=6;i.CELL_STATUS={COMMON:0,CLICK:"click",LINE:"line",COLUMN:"column",WRAP:"wrap",BIRD:"bird"};i.GRID_WIDTH=9;i.GRID_HEIGHT=9;i.CELL_WIDTH=70;i.CELL_HEIGHT=70;i.GRID_PIXEL_WIDTH=630;i.GRID_PIXEL_HEIGHT=630;i.ANITIME={TOUCH_MOVE:.3,DIE:.2,DOWN:.5,BOMB_DELAY:.3,BOMB_BIRD_DELAY:.7,DIE_SHAKE:.4},cc._RF.pop()},{}],EffectLayer:[function(t,e,i){"use strict";cc._RF.push(e,"b7325AildpDMo1OB6UP9sjw","EffectLayer");var s=t("../Model/ConstValue"),l=function(t){return t&&t.__esModule?t:{default:t}}(t("../Utils/AudioUtils"));cc.Class({extends:cc.Component,properties:{bombWhite:{type:cc.Prefab,default:null},crushEffect:{type:cc.Prefab,default:null},audioUtils:{type:l.default,default:null}},onLoad:function(){},playEffects:function(t){if(t&&!(t.length<=0)){var e={};t.forEach(function(t){var i=cc.delayTime(t.playTime),l=cc.callFunc(function(){var i=null,l=null;"crush"==t.action?((l=(i=cc.instantiate(this.crushEffect)).getComponent(cc.Animation)).play("effect"),!e["crush"+t.playTime]&&this.audioUtils.playEliminate(t.step),e["crush"+t.playTime]=!0):"rowBomb"==t.action?(l=(i=cc.instantiate(this.bombWhite)).getComponent(cc.Animation)).play("effect_line"):"colBomb"==t.action&&(l=(i=cc.instantiate(this.bombWhite)).getComponent(cc.Animation)).play("effect_col"),i.x=s.CELL_WIDTH*(t.pos.x-.5),i.y=s.CELL_WIDTH*(t.pos.y-.5),i.parent=this.node,l.on("finished",function(){i.destroy()},this)},this);this.node.runAction(cc.sequence(i,l))},this)}},start:function(){}}),cc._RF.pop()},{"../Model/ConstValue":"ConstValue","../Utils/AudioUtils":"AudioUtils"}],GameController:[function(t,e,i){"use strict";cc._RF.push(e,"7d0c0FbkntD0Z+F3/AK5y96","GameController");var s=function(t){return t&&t.__esModule?t:{default:t}}(t("../Model/GameModel"));cc.Class({extends:cc.Component,properties:{grid:{type:cc.Node,default:null}},onLoad:function(){switch(parseInt(currentIndex)){case 0:this.animalCount=4,this.step=30,this.goal=100;break;case 1:this.animalCount=4,this.step=20,this.goal=100;break;case 2:this.animalCount=4,this.step=20,this.goal=120;break;case 3:this.animalCount=5,this.step=30,this.goal=100;break;case 4:this.animalCount=5,this.step=20,this.goal=100;break;case 5:this.animalCount=5,this.step=20,this.goal=120;break;case 6:this.animalCount=6,this.step=30,this.goal=100;break;case 7:this.animalCount=6,this.step=20,this.goal=100;break;case 8:this.animalCount=6,this.step=20,this.goal=120;break;default:this.animalCount=4,this.step=30,this.goal=100}this.gameModel=new s.default,this.gameModel.init(this.animalCount);var t=this.grid.getComponent("GridView");t.setController(this),t.setStep(this.step),t.setGoal(this.goal),t.initWithCellModels(this.gameModel.getCells())},selectCell:function(t){return this.gameModel.selectCell(t)},cleanCmd:function(){this.gameModel.cleanCmd()},start:function(){}}),cc._RF.pop()},{"../Model/GameModel":"GameModel"}],GameModel:[function(t,e,i){"use strict";cc._RF.push(e,"df9066wOgZI8pHLBeX4F+hr","GameModel"),i.__esModule=!0,i.default=void 0;var s=t("./ConstValue"),l=function(t){return t&&t.__esModule?t:{default:t}}(t("./CellModel"));var n=function(){function t(){this.cells=null,this.cellBgs=null,this.lastPos=cc.v2(-1,-1),this.cellTypeNum=5,this.cellCreateType=[]}var e=t.prototype;return e.init=function(t){this.cells=[],this.setCellTypeNum(t||this.cellTypeNum);for(var e=1;e<=s.GRID_WIDTH;e++){this.cells[e]=[];for(var i=1;i<=s.GRID_HEIGHT;i++)this.cells[e][i]=new l.default}for(e=1;e<=s.GRID_WIDTH;e++)for(i=1;i<=s.GRID_HEIGHT;i++)for(var n=!0;n;){n=!1,this.cells[e][i].init(this.getRandomCellType()),this.checkPoint(i,e)[0].length>2&&(n=!0),this.cells[e][i].setXY(i,e),this.cells[e][i].setStartXY(i,e)}},e.checkPoint=function(t,e){var i=function(t,e,i){var s=[],l=[];l[t+9*e]=!0,s.push(cc.v2(t,e));for(var n=0;n<s.length;){var o=s[n],c=this.cells[o.y][o.x];if(n++,c)for(var a=0;a<i.length;a++){var u=o.x+i[a].x,h=o.y+i[a].y;u<1||u>9||h<1||h>9||l[u+9*h]||!this.cells[h][u]||c.type==this.cells[h][u].type&&(l[u+9*h]=!0,s.push(cc.v2(u,h)))}}return s},l=i.call(this,t,e,[cc.v2(1,0),cc.v2(-1,0)]),n=i.call(this,t,e,[cc.v2(0,-1),cc.v2(0,1)]),o=[],c="";if(l.length>=5||n.length>=5?c=s.CELL_STATUS.BIRD:l.length>=3&&n.length>=3?c=s.CELL_STATUS.WRAP:l.length>=4?c=s.CELL_STATUS.LINE:n.length>=4&&(c=s.CELL_STATUS.COLUMN),l.length>=3&&(o=l),n.length>=3){var a=o.concat();n.forEach(function(t){var e=!1;a.forEach(function(i){t.x==i.x&&t.y==i.y&&(e=!0)},this),e||o.push(t)},this)}return[o,c,this.cells[e][t].type]},e.getCells=function(){return this.cells},e.selectCell=function(t){this.changeModels=[],this.effectsQueue=[];var e=this.lastPos;if(1!=Math.abs(t.x-e.x)+Math.abs(t.y-e.y))return this.lastPos=t,[[],[]];var i=this.cells[t.y][t.x],l=this.cells[e.y][e.x];this.exchangeCell(e,t);var n=this.checkPoint(t.x,t.y)[0],o=this.checkPoint(e.x,e.y)[0];this.curTime=0,this.pushToChangeModels(i),this.pushToChangeModels(l);var c=i.status!=s.CELL_STATUS.COMMON&&l.status!=s.CELL_STATUS.COMMON||i.status==s.CELL_STATUS.BIRD||l.status==s.CELL_STATUS.BIRD;if(n.length<3&&o.length<3&&!c)return this.exchangeCell(e,t),i.moveToAndBack(e),l.moveToAndBack(t),this.lastPos=cc.v2(-1,-1),[this.changeModels];this.lastPos=cc.v2(-1,-1),i.moveTo(e,this.curTime),l.moveTo(t,this.curTime);var a=[t,e];return this.curTime+=s.ANITIME.TOUCH_MOVE,this.processCrush(a),[this.changeModels,this.effectsQueue]},e.processCrush=function(t){for(var e=0;t.length>0;){var i=[];if(0==e&&2==t.length){var l=t[0],n=t[1],o=this.cells[l.y][l.x],c=this.cells[n.y][n.x];if(o.status==s.CELL_STATUS.BIRD||c.status==s.CELL_STATUS.BIRD){o.status==s.CELL_STATUS.BIRD?(o.type=c.type,i.push(o)):(c.type=o.type,i.push(c))}}for(var a in t){var u=t[a];if(this.cells[u.y][u.x]){var h=this.checkPoint(u.x,u.y),r=h[0],p=h[1],f=h[2];if(!(r.length<3)){for(var d in r){var C=this.cells[r[d].y][r[d].x];this.crushCell(r[d].x,r[d].y,!1,e),C.status!=s.CELL_STATUS.COMMON&&i.push(C)}this.createNewCell(u,p,f)}}}this.processBomb(i,e),this.curTime+=s.ANITIME.DIE,t=this.down(),e++}},e.createNewCell=function(t,e,i){if(""!=e){e==s.CELL_STATUS.BIRD&&(i=s.CELL_TYPE.BIRD);var n=new l.default;this.cells[t.y][t.x]=n,n.init(i),n.setStartXY(t.x,t.y),n.setXY(t.x,t.y),n.setStatus(e),n.setVisible(0,!1),n.setVisible(this.curTime,!0),this.changeModels.push(n)}},e.down=function(){for(var t=[],e=1;e<=s.GRID_WIDTH;e++)for(var i=1;i<=s.GRID_HEIGHT;i++)if(null==this.cells[e][i]){for(var n=e,o=n;o<=s.GRID_HEIGHT;o++)this.cells[o][i]&&(this.pushToChangeModels(this.cells[o][i]),t.push(this.cells[o][i]),this.cells[n][i]=this.cells[o][i],this.cells[o][i]=null,this.cells[n][i].setXY(i,n),this.cells[n][i].moveTo(cc.v2(i,n),this.curTime),n++);var c=1;for(o=n;o<=s.GRID_HEIGHT;o++)this.cells[o][i]=new l.default,this.cells[o][i].init(this.getRandomCellType()),this.cells[o][i].setStartXY(i,c+s.GRID_HEIGHT),this.cells[o][i].setXY(i,c+s.GRID_HEIGHT),this.cells[o][i].moveTo(cc.v2(i,o),this.curTime),c++,this.changeModels.push(this.cells[o][i]),t.push(this.cells[o][i])}return this.curTime+=s.ANITIME.TOUCH_MOVE+.3,t},e.pushToChangeModels=function(t){-1==this.changeModels.indexOf(t)&&this.changeModels.push(t)},e.cleanCmd=function(){for(var t=1;t<=s.GRID_WIDTH;t++)for(var e=1;e<=s.GRID_HEIGHT;e++)this.cells[t][e]&&(this.cells[t][e].cmd=[])},e.exchangeCell=function(t,e){var i=this.cells[t.y][t.x];this.cells[t.y][t.x]=this.cells[e.y][e.x],this.cells[t.y][t.x].x=t.x,this.cells[t.y][t.x].y=t.y,this.cells[e.y][e.x]=i,this.cells[e.y][e.x].x=e.x,this.cells[e.y][e.x].y=e.y},e.setCellTypeNum=function(t){this.cellTypeNum=t,this.cellCreateType=[];for(var e=this.cellCreateType,i=1;i<=s.CELL_BASENUM;i++)e.push(i);for(var l=0;l<e.length;l++){var n=Math.floor(Math.random()*(s.CELL_BASENUM-l))+l;e[l],e[n]=e[n],e[l]}},e.getRandomCellType=function(){var t=Math.floor(Math.random()*this.cellTypeNum);return this.cellCreateType[t]},e.processBomb=function(t,e){for(var i=this,l=function(){var l=[],n=s.ANITIME.BOMB_DELAY;t.forEach(function(t){if(t.status==s.CELL_STATUS.LINE){for(var i=1;i<=s.GRID_WIDTH;i++)this.cells[t.y][i]&&(this.cells[t.y][i].status!=s.CELL_STATUS.COMMON&&l.push(this.cells[t.y][i]),this.crushCell(i,t.y,!1,e));this.addRowBomb(this.curTime,cc.v2(t.x,t.y))}else if(t.status==s.CELL_STATUS.COLUMN){for(var o=1;o<=s.GRID_HEIGHT;o++)this.cells[o][t.x]&&(this.cells[o][t.x].status!=s.CELL_STATUS.COMMON&&l.push(this.cells[o][t.x]),this.crushCell(t.x,o,!1,e));this.addColBomb(this.curTime,cc.v2(t.x,t.y))}else if(t.status==s.CELL_STATUS.WRAP)for(var c=t.x,a=t.y,u=1;u<=s.GRID_HEIGHT;u++)for(var h=1;h<=s.GRID_WIDTH;h++){var r=Math.abs(c-h)+Math.abs(a-u);this.cells[u][h]&&r<=2&&(this.cells[u][h].status!=s.CELL_STATUS.COMMON&&l.push(this.cells[u][h]),this.crushCell(h,u,!1,e))}else if(t.status==s.CELL_STATUS.BIRD){var p=t.type;n<s.ANITIME.BOMB_BIRD_DELAY&&(n=s.ANITIME.BOMB_BIRD_DELAY),p==s.CELL_TYPE.BIRD&&(p=this.getRandomCellType());for(var f=1;f<=s.GRID_HEIGHT;f++)for(var d=1;d<=s.GRID_WIDTH;d++)this.cells[f][d]&&this.cells[f][d].type==p&&(this.cells[f][d].status!=s.CELL_STATUS.COMMON&&l.push(this.cells[f][d]),this.crushCell(d,f,!0,e))}},i),t.length>0&&(i.curTime+=n),t=l};t.length>0;)l()},e.addCrushEffect=function(t,e,i){this.effectsQueue.push({playTime:t,pos:e,action:"crush",step:i})},e.addRowBomb=function(t,e){this.effectsQueue.push({playTime:t,pos:e,action:"rowBomb"})},e.addColBomb=function(t,e){this.effectsQueue.push({playTime:t,pos:e,action:"colBomb"})},e.crushCell=function(t,e,i,l){var n=this.cells[e][t];this.pushToChangeModels(n),i&&n.toShake(this.curTime);var o=i?s.ANITIME.DIE_SHAKE:0;n.toDie(this.curTime+o),this.addCrushEffect(this.curTime+o,cc.v2(n.x,n.y),l),this.cells[e][t]=null},t}();i.default=n,e.exports=i.default,cc._RF.pop()},{"./CellModel":"CellModel","./ConstValue":"ConstValue"}],GridView:[function(t,e,i){"use strict";cc._RF.push(e,"abedaY8b8REZrysBLpFyYaI","GridView");var s=t("../Model/ConstValue"),l=function(t){return t&&t.__esModule?t:{default:t}}(t("../Utils/AudioUtils"));cc.Class({extends:cc.Component,properties:{aniPre:{type:[cc.Prefab],default:[]},effectLayer:{type:cc.Node,default:null},audioUtils:{type:l.default,default:null},crushCount:{type:cc.Label,default:null},surplusStep:{type:cc.Label,default:null},news:{type:cc.Label,default:null},level:{type:cc.Label,default:null},goal:{type:cc.Label,default:null},backbtn:{type:cc.Button,default:null},nextbtn:{type:cc.Button,default:null},restartbtn:{type:cc.Button,default:null}},back:function(){cc.director.loadScene("Level")},next:function(){window.currentIndex++,cc.director.loadScene("Game")},restart:function(){cc.director.loadScene("Game")},onLoad:function(){this.setListener(),this.lastTouchPos=cc.Vec2(-1,-1),this.isCanMove=!0,this.isInPlayAni=!1,this.CrushCount=0,this.news.node.active=!1,this.nextbtn.node.active=!1,this.restartbtn.node.active=!1,this.level.string="level"+(parseInt(currentIndex)+1)},setStep:function(t){this.SurplusStep=t,this.surplusStep.string=this.SurplusStep},setGoal:function(t){this.Goal=t,this.goal.string="\u76ee\u6807:"+this.Goal},setController:function(t){this.controller=t},setListener:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(this.isInPlayAni)return!0;if(0==this.SurplusStep||this.CrushCount>=this.Goal)return!0;var e=t.getLocation(),i=this.convertTouchPosToCell(e);if(i){var s=this.selectCell(i);this.isCanMove=s.length<3}else this.isCanMove=!1;return!0},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.isCanMove){var e=t.getStartLocation(),i=this.convertTouchPosToCell(e),s=t.getLocation(),l=this.convertTouchPosToCell(s);if(i.x!=l.x||i.y!=l.y){this.isCanMove=!1;this.selectCell(l)}}},this)},initWithCellModels:function(t){this.cellViews=[];for(var e=1;e<=9;e++){this.cellViews[e]=[];for(var i=1;i<=9;i++){var s=t[e][i].type,l=cc.instantiate(this.aniPre[s]);l.parent=this.node,l.getComponent("CellView").initWithModel(t[e][i]),this.cellViews[e][i]=l}}},convertTouchPosToCell:function(t){if((t=this.node.convertToNodeSpace(t)).x<0||t.x>=s.GRID_PIXEL_WIDTH||t.y<0||t.y>=s.GRID_PIXEL_HEIGHT)return!1;var e=Math.floor(t.x/s.CELL_WIDTH)+1,i=Math.floor(t.y/s.CELL_HEIGHT)+1;return cc.v2(e,i)},updateView:function(t){var e=[];for(var i in t){var s=t[i],l=this.findViewByModel(s),n=null;if(l)n=l.view,this.cellViews[l.y][l.x]=null;else{var o=s.type,c=cc.instantiate(this.aniPre[o]);c.parent=this.node,c.getComponent("CellView").initWithModel(s),n=c,this.CrushCount++,this.crushCount.string=""+this.CrushCount,this.flag&&(this.SurplusStep--,this.surplusStep.string=""+this.SurplusStep,this.flag=!1)}n.getComponent("CellView").updateView(),s.isDeath||e.push({model:s,view:n})}e.forEach(function(t){var e=t.model;this.cellViews[e.y][e.x]=t.view},this),0==this.SurplusStep&&this.CrushCount<this.Goal&&(this.news.string="Defeat!",this.news.node.active=!0,this.restartbtn.node.active=!0),this.CrushCount>=this.Goal&&(this.news.string="Victory!",this.news.node.active=!0,currentIndex<8&&(this.nextbtn.node.active=!0))},updateSelect:function(t){for(var e=1;e<=9;e++)for(var i=1;i<=9;i++)if(this.cellViews[e][i]){var s=this.cellViews[e][i].getComponent("CellView");t.x==i&&t.y==e?s.setSelect(!0):s.setSelect(!1)}},findViewByModel:function(t){for(var e=1;e<=9;e++)for(var i=1;i<=9;i++)if(this.cellViews[e][i]&&this.cellViews[e][i].getComponent("CellView").model==t)return{view:this.cellViews[e][i],x:i,y:e};return null},getPlayAniTime:function(t){if(!t)return 0;var e=0;return t.forEach(function(t){t.cmd.forEach(function(t){e<t.playTime+t.keepTime&&(e=t.playTime+t.keepTime)},this)},this),e},getStep:function(t){return t?t.reduce(function(t,e){return Math.max(t,e.step||0)},0):0},disableTouch:function(t,e){t<=0||(this.isInPlayAni=!0,this.node.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){this.isInPlayAni=!1,this.audioUtils.playContinuousMatch(e)},this))))},selectCell:function(t){if(this.SurplusStep>0&&this.CrushCount<this.Goal){var e=this.controller.selectCell(t),i=e[0],s=e[1];return this.playEffect(s),this.disableTouch(this.getPlayAniTime(i),this.getStep(s)),this.updateView(i),this.controller.cleanCmd(),i.length>=2?(this.updateSelect(cc.v2(-1,-1)),this.audioUtils.playSwap()):(this.updateSelect(t),this.audioUtils.playClick(),this.flag=!0),i}},playEffect:function(t){this.effectLayer.getComponent("EffectLayer").playEffects(t)},start:function(){}}),cc._RF.pop()},{"../Model/ConstValue":"ConstValue","../Utils/AudioUtils":"AudioUtils"}],LevelController:[function(t,e,i){"use strict";cc._RF.push(e,"9d1d7mvKr9AI6c/SqEkxXcS","LevelController"),window.currentIndex=0,cc.Class({extends:cc.Component,properties:{loadingBar:{type:cc.ProgressBar,default:null},buttonArray:{type:[cc.Button],default:[]},title:{type:cc.Label,default:null}},onLoad:function(){this.loadingBar.node.active=!1},onLogin:function(t,e){this.loadingBar.node.active=!0,this.loadingBar.progress=0;for(var i=0;i<this.buttonArray.length;i++)this.buttonArray[i].node.active=!1;this.title.node.active=!1,window.currentIndex=e;var s=cc.loader.onProgress;cc.loader.onProgress=function(t,e){this.loadingBar.progress=t/e}.bind(this),cc.director.preloadScene("Game",function(){cc.loader.onProgress=s,cc.director.loadScene("Game")}.bind(this))},start:function(){}}),cc._RF.pop()},{}],LoginController:[function(t,e,i){"use strict";cc._RF.push(e,"68a3ctRqjRIA4qR9MllcL2s","LoginController");(function(t){t&&t.__esModule})(t("../Utils/AudioUtils"));cc.Class({extends:cc.Component,properties:{loginButton:{type:cc.Button,default:null},worldSceneBGM:{type:cc.AudioClip,default:null}},onLoad:function(){this.gameSceneBGMAudioId=cc.audioEngine.play(this.worldSceneBGM,!0,1)},onLogin:function(){cc.director.loadScene("Level")},onDestroy:function(){cc.audioEngine.stop(this.gameSceneBGMAudioId)},start:function(){}}),cc._RF.pop()},{"../Utils/AudioUtils":"AudioUtils"}]},{},["GameController","LevelController","LoginController","CellModel","ConstValue","GameModel","AudioUtils","CellView","EffectLayer","GridView"]);